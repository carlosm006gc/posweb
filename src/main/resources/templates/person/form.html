<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<meta charset="UTF-8" />
<title>People Management System</title>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" 
integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" 
crossorigin="anonymous">
	
 <link rel="stylesheet" href="//code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">

<script
  src="https://code.jquery.com/jquery-3.6.1.js"
  integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI="
  crossorigin="anonymous"></script>
 <script src="https://code.jquery.com/jquery-3.6.1.js"
  integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI=" 
  crossorigin="anonymous"></script>

<script type="text/javascript">
	$(function() {
		
		("#nameDepartament").autocomplete({
			source: "departamentNameAutoComplete", 
			minLength: 3,
			select: function(event, ui) {
				this.value = ui.item.label;
				$("#idDepartament").val(ui.item.value);
				return false;
			}
		});
	});
</script>
</head>
<body>

	<div class="container my-2">
		<h2>Edit Person</h2>
		<form action="#" th:action="@{/person/save}" th:object="${person}" method="POST">
			<input type="hidden" id="id" th:field="*{id}">
			
			<span th:if="${#fields.hasErrors('name')}" th:errors="*{name}" class="text-danger"></span>
			<input type="text" th:field="*{name}" placeholder="Name" class="form-control mb-4 col-4">
			
			<input type="date" th:field="*{birthDate}" placeholder="Birth Date" class="form-control mb-4 col-4">
      		
      		<input type="text" th:field="*{cpf}" placeholder="CPF" class="form-control mb-4 col-4">
      		
      		<span th:if="${#fields.hasErrors('email')}"th:errors="*{email }" class="text-danger"></span>
			<input type="text" th:field="*{email}" placeholder="Email" class="form-control mb-4 col-4">
			
      		<input type="text" th:field="*{phone}" placeholder="Phone" class="form-control mb-4 col-4">	 
			
			<select th:field="*{city}" class="form-control mb-4 col-4" >
			<option th:each="city: ${cities}" th:value="${city.id}" th:text="${city.name} +'  (' + ${city.uf} + ')'"></option>
			</select>
			
			<span th:if="${#fields.hasErrors('departament')}" th:errors="*{departament}" class="text-danger"></span>
			<input id="nameDepartament" type="text" th:field="*{nameDepartament}" placeholder="Departament" class="form-control mb-4 col-4">
  			<input id="idDepartament" type="hidden" th:field="*{departament}" class="form-control mb-4 col-4">	 
			
			<button type="submit" class="btn btn-info col-2">Save</button>
		</form>
		<hr>
		<a th:href="@{/person}">Return to people list</a>
	</div>
</body>
</html>